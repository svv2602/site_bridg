# Аудит цветовой системы Bridgestone (Light & Dark)

**Проект:** фронтенд [`frontend`](frontend/README.md:1)  
**База токенов:** [`globals.css`](frontend/src/app/globals.css:11), дизайн-гайд [`DESIGN_SYSTEM.md`](frontend/DESIGN_SYSTEM.md:15)

---

## 1. Общие системные проблемы

### 1.1. Разрыв между документацией и реальной системой

**Где:** дизайн‑гайд [`DESIGN_SYSTEM.md`](frontend/DESIGN_SYSTEM.md:15) vs токены в [`globals.css`](frontend/src/app/globals.css:11)

**Проблема**  
Документ описывает старую схему (zinc‑палитра, красный primary, hero `bg-zinc-900`), а в коде реализована новая система:
- тёплая stone‑палитра (`--stone-*`);
- премиальный dark (`--black-base`, `--graphite`, `--wet-asphalt`);
- primary = серебро (`--silver-accent`);
- brand‑красный зарезервирован только для бренда/алертов.

**Почему это ошибка**  
Команда будет опираться на документ и продолжать вводить `zinc` и красный как primary, что ломает консистентность и нарушает ограничение акцента ≤ 10%.

**Решение**  
- Обновить разделы 1, 3, 5 в [`DESIGN_SYSTEM.md`](frontend/DESIGN_SYSTEM.md:15) под фактические токены из [`globals.css`](frontend/src/app/globals.css:19).  
- Явно зафиксировать роли: primary = серебро (CTA), brand = красный (логотип, алерты, редкие промо), background/surface через `--background`, `--card`.

### 1.2. Смешение трёх нейтральных палитр

**Где:**  
- Токены stone/black/graphite в [`globals.css`](frontend/src/app/globals.css:42);  
- классы `bg-zinc-*`, `text-zinc-*` в админке, напр. [`admin/layout.tsx`](frontend/src/app/admin/layout.tsx:24), [`admin/automation/page.tsx`](frontend/src/app/admin/automation/page.tsx:73), [`admin/vehicles-import/page.tsx`](frontend/src/app/admin/vehicles-import/page.tsx:94);  
- публичный хедер с `bg-stone-900` в [`MainHeader()`](frontend/src/components/MainHeader.tsx:27).

**Проблема**  
Одновременно используются:
- кастомные токены (`--stone-*`, `--black-base`, `--graphite-*`);
- tailwind‑нейтрали `zinc-*`;
- прямые hex (`#0c0a09`, `#1c1917`) в hero и бейджах.

**Почему это ошибка**  
Роли фон/поверхность/бордер размываются, любые правки палитры требуют искать десятки «ручных» цветов, нарушается ощущение минимализма и ограниченной палитры.

**Решение**  
- Ввести правило: **никаких `zinc-*` и произвольных hex для нейтралей** в UI‑слое.  
- Последовательно заменить:
  - `bg-zinc-50/100` → `bg-background` или `bg-card`;  
  - `dark:bg-zinc-800/900` → `bg-[var(--card)]` / `bg-[color:var(--graphite)]`;  
  - `text-zinc-500/600` → `text-muted` / `text-muted-foreground`.

### 1.3. Дублирование ролей кнопок и состояний

**Где:** локальные Tailwind‑классы в страницах/админке vs глобальные классы [`btn-primary` / `btn-secondary` / `btn-brand`](frontend/src/app/globals.css:735).

**Проблема**  
Есть централизованные стили кнопок, но многие компоненты продолжают собирать кнопки из `bg-zinc-*` и собственных `hover/active/disabled`.

**Почему это ошибка**  
- Разные страницы дают разное визуальное поведение для одинаковых по смыслу действий.  
- Усложняется поддержка тем: часть состояний живёт на токенах, часть — на жёстких значениях.

**Решение**  
- Закрепить единый набор: `btn-primary`, `btn-secondary`, `btn-ghost`, `btn-brand` + размерные модификаторы.  
- В компонентах заменить ручные связки на эти классы.  
- Добавить в [`globals.css`](frontend/src/app/globals.css:759) консистентное disabled‑состояние (ослабленный контраст, `cursor: not-allowed`, без сильных теней).

### 1.4. Несконсолидированные акцентные цвета

**Где:** токены `--amber-warm`, `--emerald-tech`, `--sky-trust` и сезонные бейджи [`badge-summer`, `badge-winter`, `badge-allseason`](frontend/src/app/globals.css:886).

**Проблема**  
Акцентные цвета существуют, но их роли не зафиксированы, сезонные бейджи используют насыщенные градиенты, конкурирующие с бренд‑красным.

**Почему это ошибка**  
На страницах каталога суммарная площадь ярких акцентов может легко превышать 10%, что убивает премиальный «tech»‑характер.

**Решение**  
- Жёстко привязать каждый цвет к роли (success/warning/info/eco).  
- Упростить сезонные бейджи до однотонных или менее насыщенных градиентов, опираясь на токены, а не произвольные значения.

## 2. Проблемы Light темы

### 2.1. Постоянно тёмный хедер в светлой теме

**Где:** [`MainHeader()`](frontend/src/components/MainHeader.tsx:27)

**Проблема**  
Хедер фиксированно `bg-stone-900` с тёмной типографикой, тогда как фон страницы в Light‑теме — `--stone-50`. Визуально сайт выглядит «полутёмным» даже в светлом режиме.

**Почему это ошибка**  
Переключение темы почти не влияет на самый заметный блок (хедер), иерархия «светлый сайт / тёмная шапка» противоречит ожиданиям пользователя.

**Решение**  
- Ввести токены `--header-bg`, `--header-border`, `--header-text` в [`globals.css`](frontend/src/app/globals.css:11).  
- В Light: белый фон, светлый бордер, тёмный текст; в Dark: графитовый фон, тёмный бордер, светлый текст.  
- Заменить в [`MainHeader()`](frontend/src/components/MainHeader.tsx:27) все `bg-stone-*`/`border-stone-*` на использование этих токенов.

### 2.2. Слабое разделение секций и карточек

**Где:** страницы каталога, блога, дилеров, где фон = `--stone-50`, карточки = `bg-white` без выраженного бордера/тени.

**Проблема**  
Фон страницы и карточек визуально очень близок, без системных бордеров/теней блоки сливаются.

**Почему это ошибка**  
Нарушается читаемая иерархия уровней (страница → секция → карточка), пользователю сложнее «сканировать» контент.

**Решение**  
- Для секций чередовать `bg-background` и лёгкий `bg-stone-100`.  
- Для карточек всегда использовать `bg-card + border-border + shadow-sm`.  
- Зафиксировать правило: каждый уровень имеет собственный фон + бордер‑паттерн.

### 2.3. Контраст muted‑текста на тёплых фонах

**Где:** мелкие подписи (лейблы, подписи форм, disclaimers) на `bg-stone-100/200`.

**Проблема**  
`--muted = --stone-500`, `--muted-foreground = --stone-700` для текста размеров 11–13 px на светлом тёплом фоне дают граничный контраст.

**Почему это ошибка**  
Длинные мелкие подписи становятся трудночитаемыми, особенно на дисплеях с невысокой яркостью и в условиях бликов.

**Решение**  
- Ввести отдельные токены `--text-label` и `--text-caption`, завязанные на более тёмное значение (например `--stone-800` с пониженной непрозрачностью).  
- Для very‑small текстов использовать только их, избегая слишком светлого `muted`.

## 3. Проблемы Dark темы

### 3.1. Старые `zinc`‑фоны в админке

**Где:** [`admin/layout.tsx`](frontend/src/app/admin/layout.tsx:24), [`admin/automation/page.tsx`](frontend/src/app/admin/automation/page.tsx:73), [`admin/vehicles-import/page.tsx`](frontend/src/app/admin/vehicles-import/page.tsx:94)

**Проблема**  
В Dark‑режиме админка использует `bg-zinc-900/800/700`, тогда как публичная часть построена на `--black-base` / `--graphite`. Фактически это другая цветовая система.

**Почему это ошибка**  
- Бренд‑опыт расслаивается: админка не ощущается частью того же продукта.  
- Контраст между близкими `zinc`‑тонами слабый, границы панелей и таблиц плохо читаются.

**Решение**  
- Перенести админку на те же токены: `bg-background` для фона, `bg-card` для панелей, `border-border` или `border-border-dark` для разделителей.  
- Заменить все `dark:bg-zinc-*` на токены `--graphite`/`--graphite-hover`.

### 3.2. Серебряный primary на очень тёмных фонах

**Где:** hero‑зоны и CTA‑кнопки [`btn-primary`](frontend/src/app/globals.css:735) на фоне `--black-base` / `--graphite`.

**Проблема**  
Серебро даёт высокий контраст, но при большом числе CTA выглядит «плоскими светлыми плитками» и перетягивает внимание, особенно рядом с hero‑градиентами и glow‑эффектами.

**Почему это ошибка**  
Перегрузка акцентом снижает ощущение премиальности и делает интерфейс более «маркетинговым», чем «tech».

**Решение**  
- Ввести вторичный dark‑CTA на `--silver-muted` для второстепенных действий.  
- Оставить чистый `--silver-accent` только для главных CTA (hero, ключевые формы).

### 3.3. Неразличимые hover‑состояния навигации

**Где:** ссылки меню в [`MainHeader()`](frontend/src/components/MainHeader.tsx:50) и дропдауне.

**Проблема**  
Hover = `hover:bg-stone-800` поверх `bg-stone-900`: визуальная разница минимальна, отклик практически не заметен.

**Почему это ошибка**  
Пользователь с мышью не чувствует, что элемент интерактивен / что на него навели, UX становится «глухим».

**Решение**  
- Использовать для hover токен `--graphite-hover` (уже определён в [`globals.css`](frontend/src/app/globals.css:29)).  
- Добавить лёгкую смену яркости текста (secondary → primary) или underline‑анимацию.

## 4. Несоответствия между темами

### 4.1. Разные системы нейтралей и бордеров

**Наблюдение**  
В Light всё строится вокруг `stone` и белого, в Dark — вокруг `black-base` и `graphite`, но в коде параллельно живут `zinc-*` и явные hex. При переключении темы элементы на токенах ведут себя предсказуемо, а на «сырых» значениях — нет.

**Риск**  
Иерархия может ломаться: секция, бывшая вторичной в Light, в Dark становится слишком яркой или наоборот.

**Решение**  
Стандартизировать уровни: `page background → section alt → card → interactive`, для каждого уровня задать токены в [`globals.css`](frontend/src/app/globals.css:70) и использовать только их.

### 4.2. Роль brand‑красного

**Наблюдение**  
Токены `--brand`/`--brand-dark` есть, логотип‑плашка использует красный (`bg-brand` в [`MainHeader()`](frontend/src/components/MainHeader.tsx:30)), дополнительно есть `btn-brand` и цветные градиенты бейджей.

**Проблема**  
Граница между «брендовым» и «просто ярким» размыта, особенно при большом количестве цветных бейджей и возможном использовании `btn-brand` для обычных CTA.

**Решение**  
- Формально запретить использование `btn-brand` для стандартных действий.  
- Закрепить в гайде: красный = логотип + алерты/критические сообщения/редкие промо.  
- Для сезонности использовать amber/sky/emerald, а не красный.

### 4.3. Hero‑секции всегда тёмные

**Где:** класс [`hero-dark`](frontend/src/app/globals.css:405) и связанные `.hero-*`.

**Наблюдение**  
Hero всегда на тёмном градиенте с белым текстом. В Light это ожидаемо, в Dark получается «тёмный сайт с ещё более тёмным hero», и хедер/hero сливаются.

**Решение**  
- Ввести вариант hero для Dark: чуть светлее фон (ближе к `--graphite`), а карточки/формы внутри — на более светлых поверхностях.  
- Либо параметризовать насыщенность hero через токены `--color-hero-background-light` / `--color-hero-background-dark`.

## 5. Рекомендации по унификации цветовой системы

1. **Единая матрица ролей для обеих тем**  
   Описать в гайде роли (background, surface, card, border, text.primary/secondary/muted, accent.primary/brand, semantic states) и всегда ссылаться на них, а не на конкретные hex/Tailwind‑классы.

2. **Полный отказ от `zinc` в UI‑слое**  
   Использовать `zinc` только в dev‑утилитах/старом коде; постепенно мигрировать на stone/graphite/silver и удалить остатки.

3. **Централизация состояний**  
   В [`globals.css`](frontend/src/app/globals.css:252) завести токены для hover/focus/disabled, чтобы любые новые компоненты автоматически попадали в единую логику.

4. **Жёсткое ограничение акцентов**  
   На уровне дизайна и ревью проверять, что доля насыщенных цветов (brand + яркие бейджи) не превышает ~10% площади ключевых экранов.

5. **Согласование hero и header**  
   Развести по яркости и фактуре: в каждой теме хедер и hero должны образовывать понятный вертикальный градиент по иерархии, а не сливаться.

## 6. Итоговые правила для Light & Dark

### 6.1. Light

- Page background: `--stone-50`.  
- Section alt: `--stone-100`.  
- Card: `#ffffff + border-border + shadow-sm`.  
- Text: primary = `--stone-900`, secondary = `--stone-700`, small captions — через отдельные токены `--text-label`/`--text-caption`.  
- Primary CTA: `btn-primary` (серебро), brand‑красный — только для логотипа и критических коммуникаций.  
- Состояния: hover — лёгкое изменение яркости, focus — единый серебряный outline, disabled — пониженный контраст без смены hue.

### 6.2. Dark

- Page background: `--black-base`.  
- Section alt: `--wet-asphalt`.  
- Card: `--graphite + border-dark + shadow-md`.  
- Text: primary = `--text-primary`, secondary/muted — только для коротких пояснений.  
- Primary CTA: серебро, второстепенные — `--silver-muted`; brand‑красный — только бренд/алерты.  
- Состояния: hover — `--graphite-hover`, focus — серебряный outline, disabled — затемнённая поверхность + muted‑текст.

Эти правила закрепляют текущую концепцию **Dark / premium / tech**, усиливают минимализм и обеспечивают консистентность цветовых ролей в обеих темах.